---
title: 学堂在线C++程序设计第六章学习笔记
date: 2021-07-28 10:12:47
tags: ['C++']
category: C++
article: 学堂在线C++程序设计第六章学习笔记
---

# 学堂在线C++程序设计第六章学习笔记

变量和对象定义在不同的位置
- 其作用域，可见性，生存期都不同

友元：
- 对一些类外的函数，其他的类，给预授权，使之可以访问类的私有成员

## 标识符的作用域与可见性

作用域分类：
- 函数原型作用域
- 局部作用域
- 类作用域
- 文件作用域
- 命名空间作用域

函数原型作用域
- 函数原型中的参数

类的作用域
- 类的成员具有类作用域，其范围包括类体和成员函数体
- 在类作用域以外访问类的成员
    - 静态成员：通过类名，或者该类的对象名，对象引用访问
    - 非静态成员：通过类名，或该类的对象名，对象引用，对象指针访问

文件作用域
- 不在前述各个作用域中出现的声明，就具有文件作用域
- 其作用域开始于声明点，结束于文件尾

可见性
- 可见性是从对标识符的引用角度来谈论的
- 可见性表示从内层作用域向外层作用域“看”时能看见什么
- 如果标识在某处可见，就可以在该处引用此标识符
- 如果某个标识符在外层中声明，且在内层中没有同一标识符的声明，则该标识符在内层可见
- 对于两个嵌套的作用域，如果在内层作用域内声明了与外层作用域中同名的标识符，则外层标识符在内层不可见


## 对象的生存期

静态生存期
- 这种生存期与程序的运行期相同
- 在文件作用域中声明的对象具有这种生存期
- 在函数内部声明静态生存期对象，要冠以关键字static

动态生存期
- 开始于程序执行到声明点时，结束于命名该标识符的作用域结束处
- 块作用域中声明的，没有用static修饰的对象是动态生存期的对象（也称局部生存期对象）


## 静态数据成员

- 用关键词static修饰
- 为该类的所有对象共享，静态数据成员具有静态生存期
- 必须在类外定义和初始化，用（::）来指明所属的类

```C++
class Point{
    public:
        static int count;  //声明
}
int Point::count = 0; //初始化
```

### 静态函数成员

静态函数成员主要用来处理静态数据成员

静态函数成员要处理非静态数据成员，需要用对象调用


## 类的友元

- 友元是C++提供的一种破坏数据封装和数据隐藏的机制
- 通过将一个模块声明为另一个模块的友元，一个模块能够引用到另一个模块中本是被隐藏的信息
- 可以声明友元函数和友元类
- 为了确保数据的完整性，及数据封装与隐藏的原则，建议慎用友元


友元函数
- 友元函数是在类声明中由关键字friend修饰说明的非成员函数，在它的函数体中能够通过对象名访问private和protected成员
- 作用：增加灵活性，使程序员可以在封装和快速性方面做合理选择
- 访问对象中的成员必须通过对象名

友元类
- 若一个类为另一个类的友元，则此类的所有成员都能访问对方类的私有成员
- 声明语法：将友元类名在另一个类中使用friend修饰说明

```C++
class A{
    friend class B;
    public:
        void display() {
            cout << X << endl;
        }
    private:
        int X;
}

class B{
    public:
        void set(int i);
        void display();
    private:
        A a;
}

void B::set(int i) {
    a.X = i;
}

void display() {
    a.display();
}

```

类的友元关系是单向的：
- 声明B类是A类的友元 不等于 A类是B类的友元



